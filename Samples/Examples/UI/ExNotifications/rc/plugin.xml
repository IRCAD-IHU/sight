<!--
This example shows how to display notifications popups.

Mode 1: Using SNotifier service (recommanded) and appropriate signals from IService (notifyInfo, notifySuccess, notifyFailure)
connected to SNotifier slots popInfo/Failure/Success.

Mode 2: Standalone by calling directly the notification dialog inside your service (see SDisplayTestNotifications.cpp)
this mode is not recommanded since each service can pop notification without any knowlegde of how many notifications
are already displayed and where they are displayed on screen.

-->
<plugin id="ExNotifications" version="@PROJECT_VERSION@">

    <requirement id="servicesReg" />

    <extension implements="::fwServices::registry::AppConfig">
        <id>ExNotificationsConfig</id>
        <config>

            <service uid="mainFrame" type="::gui::frame::SDefaultFrame">
                <gui>
                    <frame>
                        <name>Example of Notifications popup @PROJECT_VERSION@</name>
                        <minSize width="800" height="600" />
                    </frame>
                    <toolBar/>
                </gui>
                <registry>
                    <toolBar sid="toolbar" start="yes" />
                    <view sid="mainview" start="yes" />
                </registry>
            </service>
            
           <service uid="toolbar" type="::gui::aspect::SDefaultToolBar">
                <gui>
                    <layout>
                        <editor/>
                        <editor/>
                        <editor/>
                        <separator/>
                        <menuItem name="NOTIFY !"/>
                    </layout>
                </gui>
                <registry>
                    <editor sid="useSNotifier" start="yes"/>
                    <editor sid="type" start="yes" />
                    <editor sid="position" start="yes" />
                    <menuItem sid="notify" start="yes" />
                </registry>
            </service>

            <service uid="mainview" type="::gui::view::SDefaultView">
                <gui>
                    <layout type="::fwGui::LineLayoutManager">
                        <orientation value="vertical" />
                    </layout>
                </gui>
                <registry>
                </registry>
            </service>

            <service uid="notify" type="::gui::action::SSlotCaller">
                <slots>
                    <slot>testNotifier/update</slot>
                </slots>
            </service>

            <service uid="useSNotifier" type="::guiQt::editor::SParameters">
                <parameters>
                    <param type="bool" name="Use SNotifier to centralize." key="useSNotifier" defaultValue="false" />
                </parameters>
            </service>

            <service uid="position" type="::guiQt::editor::SParameters">
                <parameters>
                    <param type="enum" name="Position" key="position" defaultValue="ALL" values="ALL,TOP_LEFT,TOP_RIGHT,CENTERED_TOP,CENTERED,BOTTOM_LEFT,BOTTOM_RIGHT,CENTERED_BOTTOM" />
                </parameters>
            </service>

            <service uid="type" type="::guiQt::editor::SParameters">
                <parameters>
                    <param type="enum" name="Type" key="type" defaultValue="INFO" values="INFO,SUCCESS,FAILURE" />
                </parameters>
            </service>

            <!-- Dummy service only used to test notifications -->
            <service uid="testNotifier" type="::uiGenericQt::action::SDisplayTestNotifications" />

            <!-- SNotifier listen to all the connected service & display queued notification at the same place (here TOP_RIGHT)-->
            <service uid="notifier" type="::guiQt::SNotifier" >
                <message>Default Message</message><!-- Default message printed if empty string is emitted in notify* signals -->
                <position>TOP_RIGHT</position><!-- Default position for ALL notifications (overriden by setEnumParameter slot) -->
                <duration>3000</duration><!-- Time the notifications are displayed on screen ( + 1sec for fadein & fadeout effects) -->
            </service>

            <!-- connection from IService notify signals to the SNotifier,you can add as many service as you need -->
            <connect>
                <signal>testNotifier/notifyInfo</signal>
                <slot>notifier/popInfo</slot>
            </connect>

            <connect>
                <signal>testNotifier/notifySuccess</signal>
                <slot>notifier/popSuccess</slot>
            </connect>

            <connect>
                <signal>testNotifier/notifyFailure</signal>
                <slot>notifier/popFailure</slot>
            </connect>

            <!-- Others connections -->
            <connect>
                <signal>position/enumChanged</signal>
                <slot>testNotifier/setEnumParameter</slot>
                <slot>notifier/setEnumParameter</slot>
            </connect>

            <connect>
                <signal>type/enumChanged</signal>
                <slot>testNotifier/setEnumParameter</slot>
            </connect>

            <connect>
                <signal>useSNotifier/boolChanged</signal>
                <slot>testNotifier/setBoolParameter</slot>
            </connect>

            <start uid="mainFrame" />
            <start uid="notifier" />
            <start uid="testNotifier" />

        </config>
    </extension>


</plugin>
