<extension implements="::fwServices::registry::AppConfig">
    <id>mesherParametersCfg</id>
    <parameters>
        <param name="GENERIC_UID" />
        <param name="MESHER_UID" />
        <param name="TRIGGER_CHANNEL" />
        <param name="CLOSE_CONFIG_CHANNEL" />
    </parameters>

    <config>

        <object type="::fwData::Composite">

            <service uid="${GENERIC_UID}_frame" type="::fwGui::IFrameSrv" impl="::gui::frame::SDefaultFrame" autoConnect="yes">
                <window onclose="notify" />
                <gui>
                    <frame>
                        <name>Mesher parameters</name>
                        <style mode="STAY_ON_TOP" />
                    </frame>
                </gui>
                <registry>
                    <view sid="${GENERIC_UID}_view" start="yes" />
                </registry>
            </service>

            <service uid="${GENERIC_UID}_view" impl="::gui::view::SDefaultView" >
                <gui>
                    <layout type="::fwGui::LineLayoutManager">
                        <orientation value="vertical" />
                        <view proportion="0" />
                        <view proportion="0" />
                    </layout>
                </gui>
                <registry>
                    <view sid="${GENERIC_UID}_input_parameters" start="yes" />
                    <view sid="${GENERIC_UID}_startMesher" start="yes" />
                </registry>
            </service>

            <service uid="${GENERIC_UID}_input_parameters" impl="::guiQt::editor::SParameters" autoConnect="no">
                <parameters>
                    <param type="int" name="Min value to mesh" key="valueMin" defaultValue="1" min="0" max="255" />
                    <param type="int" name="Max value to mesh" key="valueMax" defaultValue="255" min="0" max="255" />
                    <param type="int" name="Adapt" key="adapt" defaultValue="50" min="0" max="100" />
                    <param type="int" name="Radius" key="radius" defaultValue="5" min="1" max="100" />
                    <param type="int" name="Faces" key="faces" defaultValue="5" min="0" max="1000000" />
                    <param type="bool" name="Faces in percent" key="percentage" defaultValue="true" />
                    <param type="bool" name="Close the mesh" key="closing" defaultValue="false" />
                </parameters>
            </service>

            <service uid="${GENERIC_UID}_startMesher" impl="::uiLogo::editor::SButton" autoConnect="no">
                <label>Start</label>
                <tooltip>Launch the CGoGn mesher with the settings above.</tooltip>
            </service>

            <connect>
                <signal>${GENERIC_UID}_input_parameters/intChanged</signal>
                <slot>${MESHER_UID}/setInteger</slot>
            </connect>

            <connect>
                <signal>${GENERIC_UID}_input_parameters/boolChanged</signal>
                <slot>${MESHER_UID}/setBoolean</slot>
            </connect>

            <proxy channel="${CLOSE_CONFIG_CHANNEL}">
                <signal>${GENERIC_UID}_frame/closed</signal>
            </proxy>

            <proxy channel="${TRIGGER_CHANNEL}">
                <signal>${GENERIC_UID}_startMesher/triggered</signal>
            </proxy>

            <start uid="${GENERIC_UID}_frame" />

        </object>

    </config>
</extension>

