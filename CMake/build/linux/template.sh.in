#! /bin/bash
# Shell script to ease the launch of a Sight application on linux.
#
# This exports the proper LD_LIBRARY_PATH, and append the profile.xml of the application

# Don't modify this file, it is automatically generated by CMake.

me=$(cd "$(dirname "$0")"; pwd)

# Setup the directories
bindir="@LAUNCHER_PATH@"
rootdir=`cd "$me/.." ; pwd`
libdir="$rootdir/lib"
sdkdir="@Sight_LIBRARY_DIR@"
extdir="@EXTERNAL_LIBRARIES@/lib"

bundledir="$rootdir/@FWBUNDLE_RC_PREFIX@"
bundleopt="-B $bundledir"

if [ -n "$sdkdir" ]; then
    bundleopt="$bundleopt -B @Sight_BUNDLES_DIR@"
fi

# export LD_LIBRARY_PATH
LD_LIBRARY_PATH=$libdir:$sdkdir:$extdir:${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
export LD_LIBRARY_PATH

# export the path to the fonts if it exists (mandatory for Qt)
QT_QPA_FONTDIR="$libdir/fonts"
if [ -d $QT_QPA_FONTDIR ]; then
    export QT_QPA_FONTDIR
fi

# Use CMAKE Variable of fwlauncher and Profile.xml path
exec "$bindir/@LAUNCHER@" "$bundledir/@PROFILE_PATH@" $bundleopt
